# Топ-10 причин использовать Node.js

Есть много серьёзных причин использовать Node.js, вне зависимости от вашего опыта.
Я расскажу вам о самых главных и полезных и из них, и вы точно влюбитесь!

Знаю, вы не какой-то модник, и не собираетесь использовать крутую и популярную
платформу только потому, что все так делают. Поэтому вы никогда по-настоящему
и не присматривались к [Node.js][1]. Ну или ваш шеф пока не одобрял этого.
Что ж, пора присмотреться — есть много отличных дельных доводов, чтобы выбрать Node.
Вот десять из них.

![Node.js][Node.js]

## 1. Вы уже знаете JavaScript

Дайте угадаю. Вы работаете с полнофункциональным клиентским фреймворком 
([Angular][2], [Ember][3], [Backbone][4]) и серверным RESTful API, который 
гоняет JSON туда и обратно. А если и не работаете, то уж точно писали свой
на jQuery. Так что если вы не используете Node.js на сервере, вам нужно
постоянно преобразовывать 1) логику в своей голове с JavaScript на серверный
фреймворк и 2) HTTP-запросы с JSON в серверные объекты.

Используя JavaScript во всём приложении, вы не только бережёте разум, но и 
выигрываете в скорости разработки. А переиспользуя модели и шаблоны,
делаете приложение меньше, что уменьшает его сложность и вероятность ошибок.

JavaScript завоёвывает мир. Вряд ли тут что-то скоро изменится. JavaScript
работает на каждом компьютере мира и похоже так будет и дальше.

## 2. Скорость

Node.js — это среда выполнения JavaScript на основе движка V8, разработанного
в Google для Chrome. V8 выполняет JavaScript со сверхзвуковой скоростью
благодаря компиляции в низкоуровневый машинный код.

![сверхзвуковой реактивный самолёт][сверхзвуковой реактивный самолёт]

В добавок к сверхзвуковой скорости, еще одно настоящее чудо — событийный
цикл Node.js. Это единый процесс, который выполняет все операции
ввода-вывода асинхронно.  Обычно, такие операции выполняются
либо синхронно, блокируя основной процесс, либо асинхронно, порождая
параллельные процессы для выполнения работы. Но обычно асиннхронность требует
большого количества памяти и имеет известные сложности в программировании.
К счастью с Node.js всё проще: когда приложению нужно выполнить операцию
ввода-вывода, оно посылает асинхронную задачу в событийный цикл вместе
с колбеком и продолжает выполнять остальную часть программы.
После завершения асинхронной операции событийный цикл возвращается к этой задаче,
чтобы выполнить функцию обратного вызова.

Другими словами, чтение и запись в сетевых соединениях, файловых системах
и базах данных — все самые частые задачи в веб-приложениях — в Node выполняются
очень-очень быстро. Это позволяет создавать быстрые и масштабируемые сетевые
приложения, легко справляющиеся с большим количеством подключений.

## 3. Инструменты

![npm][пакетный менеджер Node.js]

[npm][5] — это пакетный менеджер Node.js и он… изумителен. Конечно же, 
он напоминает пакетные менеджеры из других экосистем, однако этот пакетный
менеджер быстр, надежен и понятен. Он отлично справляется с определением
и установкой зависимостей проекта, и хранит каждый пакет изолированно, 
избегая конфликтов версий. Но кроме этого он может устанавливать глобальные
shell-команды и компилировать зависимые от платформы бинарные файлы.
Не припоминаю случая, npm заставлял меня задумываться — «почему
модули конфликтуют? Где установлен модуль? Почему npm выбирал эту версию,
а не другую?»

[grunt][6] — достойный почитания таск-менеджер, но ему на пятки уже наступают,
новички — [gulp][7], [brunch][8] и [broccoli][9], которые уделяют большое
внимание сборке и преобразованию файлов, отлично работая с файловыми
потоками JavaScript.

## 4. Еще раз — вы уже знаете JavaScript

![Mongo][Mongo]

Итак, вы решили использовать JavaScript на сервере и ужасно воодушевлены тем,
что вам больше не нужно преобразовывать данные между клиентом и сервером.
Но их сохранение в базу данных требует еще больших преобразований!

Но есть и хорошие новости. Если вы используете объектную базу данных 
вроде [Mongo][10], то и здесь найдется место для JavaScript.

С Node.js вы можете писать на одном языке код клиента, сервера
и базы данных. Просто храните данные в обычном JSON-формате повсюду
от браузера до диска.

## 5. Простота работы в реальном времени

Если Node.js так ловко управляется с кучей параллельных подключений, вполне разумно,
что он справится и с многопользовательскими веб-приложениями, работающими 
в режиме реального времени, вроде чатов и игр. Событийный цикл Node отлично справится
с необходимостью обслуживать большое количество пользователей за раз.
А с использованием веб-сокетов работа в реальном времени становится еще лучше.  
Дусторонние каналы передачи данных в веб-сокетах помогают отправлять данные
от сервера на клиент так же легко, как и с клиента на сервер. WebSocket-протокол
работает через TCP и не нагружает HTTP лишний раз.

[Socket.io][11] — одна из наиболее популярных библиотек для работы с веб-сокета, 
делающая разработку коллективных веб-приложений убийственно простой. Вот небольшой
сервер на socket.io:

    var app = require('http').createServer(handler)
    var io = require('socket.io')(app);

    app.listen(8080);

    io.on('connection', function (socket) {
  
      // Отправка сообщения клиенту
      socket.emit('event to client', { hello: 'world' });

      // Обработка сообщения от клиента
      socket.on('event from client, function (data) {
        console.log(data);
      });
    });

## 6. Потоковая передача данных

Обычно, веб-фреймворки работают с HTTP-запросами и ответветами как с объектами.
В действительности же они являются потоками ввода/вывода, как вы могли уже 
догадаться, если вы сталкивались с потоковой передачей файлов из файловой системы.
Тут мы можем сделать сделать кое-что интересное, ведь Node.js отлично
знает как нужно работать с командами ввода/вывода. К примеру, можно
[перекодировать аудио- или видео-файлы][12] прямо во время загрузки, сократив
общее время их обработки.

Node может записывать или считывать потоки прямо в веб-сокеты или из них. То же
самое можно проделывать и с HTTP. Так в реальном времени можно показывать
в браузере `stdout` запущенного на сервере процесса, просто направив его вывод
в веб-сокет. 

## 7. Общий код и работа реального времени на сладкое

У вас, наверное, уже назрел вопрос: «Если с Node.js я могу писать JavaScript
и на клиенте, и на сервере, и если обмен данными между между ними стал проще,
то может быть я могу писать приложения с общим кодом и автоматической
синхронизацией данных на клиенте и сервере?»

![Meteor][Meteor]

Ответ на ваш вопрос — да, и такое приложение можно написать с помощью фреймворка
[Meteor][13]. Meteor — это веб-фреймворк нового поколения, написаный на Node.
С общим кодом для клиента и сервера. С ним вы можете сохранять данные в базе
прямиком из вашего javascript-кода в браузере. А уже оттуда эти данные попадают
на сервер. В обратную сторону это также работает! Любые обновления на сервере
автоматически отсылаются клиенту. Дальше ещё лучше. Любая веб-страница, на которой 
отображаются эти данные, реагирует автоматически и сама обновляется!

    // Сохраняем значение 'name' при клике на 'submit' прямо в браузере!
    '.click .submit': function(e, tpl) {
      Users.update(
        { _id: this._id },
        { $set: { name: $('.name').val() }}
      );
    }

## 8. Компании-опекуны

У любого опенсорс-проекта есть врожденный порок — быть брошенным его
добровольцами-разработчиками. Но не в случае с Node.js. Сейчас его спонсирует
[Joyent][14]. Они наняли ведущего разработчика и других участников проекта,
так что теперь за будущим Node.js стоит реальная компания. Стоит ли говорить
об огромном числе больших организаций с проектами совершенно разных размеров:
Walmart, Microsoft, Yahoo, Paypal, Voxer и многих других.

## 9. Хостинг

![Modulus][Modulus]

Node.js завоевал сердца, и теперь для нее появляется все больше хостингов.
Так, в частности, различные облачные хостинги, такие как [Modulus][15],
уже умеют устанавливать Node.js одной командой. Даже дедушка облачных
хостингов Heroku, официально поддерживает приложения на Node.

## 10. Каждый разработчик знает JavaScript (хотя бы чуть-чуть)

Тут для вашего руководителя.

JavaScript появился еще на заре интернета с его первыми `onclick` и`onmouseover`.
Каждый веб-разработчик хоть немного писал на нем, ну или хотя бы ставил какой-нибудь
jQuery-плагин. Увы, способных веб-разработчиков в наши дни найти не так-то просто.
Поэтому когда выбираете веб-платформу, почему бы не выбрать ту, язык которой
известен каждому веб-разработчику в мире?

## Награда дочитавшим!

Но погодите, это ещё не всё! В любой платформой и продукте, хоть с открытым кодом,
хоть нет, большую роль играет сообщество. Здесь Node.js стяжал себе лавры —
множество умных разработчиков помогают развивать NodeJS на митапах и конференциях.
В то же время, сообщество открыто и дружелюбно. Эти умные ребята всегда готовы
предложить помощь новичкам в Node и программировании вообще. Вам не будет
неловко за вопрос в IRC-чате или на Github. Сообщество очень активно — 
в `npm` уже больше 91,000 модулей. И ещё, сообщество не скупится и в 2013 
году [было собрано больше $70,000 пожертвований][16] для оплаты
публичных npm-серверов.

Да, Node — последний писк моды. Но мир веб-разработки непредсказуем, и на
следующей неделе Node вполне может кануть в Лету, а место под солнцем
захватит кто-то новый. Может быть Go или Elixir? Но вам всё же стоит
попробовать Node.js.

<section class="gratitude-block gratitude-block-ok">
  <a title="Ссылка на блог компании" href="http://weareok.ru/">
    <img src="img/ok.svg" alt="Логотип компании «Одноклассники»">
  </a>
  <p>Статья переведена благодаря спонсорской поддержке компании «<a title="Ссылка на блог компании" href="http://weareok.ru/">Одноклассники</a>».</p>
</section>

[1]: http://nodejs.org/
[2]: https://angularjs.org/
[3]: http://emberjs.com/
[4]: http://backbonejs.org/
[5]: https://www.npmjs.org/
[6]: http://gruntjs.com/
[7]: http://gulpjs.com/
[8]: http://brunch.io/
[9]: https://github.com/broccolijs/broccoli
[10]: http://www.mongodb.org/
[11]: http://socket.io/
[12]: http://transloadit.com/blog/2010/12/realtime-encoding-over-150x-faster/
[13]: https://www.meteor.com/
[14]: https://www.joyent.com/
[15]: https://modulus.io/
[16]: https://scalenpm.nodejitsu.com/

[Node.js]: img/e939.png
[сверхзвуковой реактивный самолёт]: img/3236.jpg
[пакетный менеджер Node.js]: img/2876.png
[Mongo]: img/c02f.jpeg
[Meteor]: img/3004.png
[Modulus]: img/d12b.png
